\ProvidesPackage{cvsqldb}[2021/05/11 Basic styles for the csvsqldb documentation]

\RequirePackage[top=3cm,bottom=3cm,left=3cm,right=3cm,headsep=10pt,a4paper]{geometry}
%\usepackage[parfill]{parskip}    % Activate to begin paragraphs with an empty line rather than an indent
\RequirePackage{graphicx}
\RequirePackage[clearempty,pagestyles,newlinetospace]{titlesec}
\RequirePackage{amssymb}
\RequirePackage{epstopdf}
\RequirePackage{enumitem}
\RequirePackage{lmodern}
\RequirePackage{microtype} % Slightly tweak font spacing for aesthetic
\RequirePackage[T1]{fontenc}
\RequirePackage[utf8]{inputenc}
\RequirePackage[english]{babel}
\RequirePackage{multirow}
\RequirePackage{color}
\RequirePackage[svgnames]{xcolor}
\RequirePackage{listings}
\RequirePackage[margin=10pt,font={small,sf},labelfont=bf]{caption}
\RequirePackage{marginnote}
\RequirePackage{booktabs}
\RequirePackage{tipa}
\RequirePackage{tcolorbox}
\RequirePackage{fancyhdr}
\RequirePackage{newfloat}
\RequirePackage{extendedbacknaur}
\RequirePackage{numprint}
\RequirePackage[numberFieldsTwice,littleEndian,numberBitsAbove]{bitpattern}
\RequirePackage{ccicons}
\RequirePackage{tikz}
\usetikzlibrary{automata, positioning, arrows.meta, shapes.misc,graphs}
\RequirePackage[hyphens]{url}
\RequirePackage{bm}
\RequirePackage{bytefield}
\RequirePackage{beramono}
\RequirePackage{placeins}

\bpStartAtBit{15}
\bpSetBitWidth{15px}
%----------------------------------------------------------------------------------------
%    DECLARATIONS
%----------------------------------------------------------------------------------------
\renewcommand{\sfdefault}{lmss}
\setlist{nolistsep} % Reduce spacing between bullet points and numbered lists

%----------------------------------------------------------------------------------------
%    PAGE HEADERS
%----------------------------------------------------------------------------------------
\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{\markboth{\normalsize\sffamily\bfseries\chaptername\ \thechapter.\ #1}{}} % Chapter text font settings
\renewcommand{\sectionmark}[1]{\markright{\normalsize\sffamily\bfseries\thesection\hspace{5pt}#1}{}} % Section text font settings
\fancyhf{} \fancyhead[LE,RO]{\sffamily\bfseries\normalsize\thepage} % Font setting for the page number in the header
\fancyhead[LO]{\rightmark} % Print the nearest section name on the left side of odd pages
\fancyhead[RE]{\leftmark} % Print the current chapter name on the right side of even pages
\renewcommand{\headrulewidth}{0.5pt} % Width of the rule under the header
\addtolength{\headheight}{2.5pt} % Increase the spacing around the header slightly
\addtolength{\headsep}{10pt} % Increase the spacing below the header
\renewcommand{\footrulewidth}{0pt} % Removes the rule in the footer
\fancypagestyle{plain}{%
\fancyhead{}\renewcommand{\headrulewidth}{0pt}%
\cfoot{\normalsize\sffamily\bfseries\thepage}} % Style for when a plain pagestyle is specified

% Removes the header from odd empty pages at the end of chapters
\makeatletter
\renewcommand{\cleardoublepage}{
\clearpage\ifodd\c@page\else
\hbox{}
\vspace*{\fill}
\thispagestyle{empty}
\newpage
\fi}

%----------------------------------------------------------------------------------------
%    CHAPTER HEADINGS
%----------------------------------------------------------------------------------------
\titleformat{\chapter}[display]
{\normalfont\bfseries\filleft}
{\resizebox{10mm}{!}{\sffamily\bfseries \thechapter}}
{1ex}
{%\titlerule[2pt]
\vspace{2ex}%
\sffamily\Huge}
[\vspace{4ex}]

\titleformat{\section}
  {\normalfont\sffamily\Large\bfseries}{\thesection}{1em}{}

\titleformat{\subsection}
  {\normalfont\sffamily\large\bfseries}{\thesubsection}{1em}{}

\titleformat{\subsubsection}
  {\normalfont\sffamily\normalsize\bfseries}{\thesubsection}{1em}{}

%----------------------------------------------------------------------------------------
%    GRAPHICS
%----------------------------------------------------------------------------------------
\DeclareGraphicsRule{.tif}{png}{.png}{`convert #1 `dirname #1`/`basename #1 .tif`.png}

\tikzset{
font=\scriptsize\ttfamily,
node distance=5mm,
terminal/.style={rounded rectangle,draw=blue!50,fill=blue!10,thick,minimum size=4mm, text height=1.2ex,text depth=.25ex},
nonterminal/.style={rectangle,draw=blue!50,fill=green!10,thick,minimum size=4mm, text height=1.2ex,text depth=.25ex},
every path/.style = {draw, > = latex},
point/.style={circle,inner sep=0.5pt,outer sep=0pt,minimum size=0pt,fill=red},
endpoint/.style={circle,inner sep=1.5pt,minimum size=0pt,draw=black},
startpoint/.style={circle,inner sep=1pt,minimum size=0pt,fill=black},
hv path/.style={to path={-| (\tikztotarget)}},
vh path/.style={to path={|- (\tikztotarget)}}
}

\newenvironment{SyntaxGrammar}[2]{% #1 = caption, #2 = label
    \subsubsection{#1}
    \label{#2}
    \renewcommand{\arraystretch}{1.3}
    \begin{figure}[!htbp]
    \begin{tikzpicture}
}{%
    \end{tikzpicture}
    \end{figure}
    \FloatBarrier
}

\newcommand{\putendline}[1]{\fill[black] (#1) circle (0.75pt);}
    

%----------------------------------------------------------------------------------------
%    ITEMIZE AND ENUMERATE
%----------------------------------------------------------------------------------------
\setlist{itemsep=.1em}

%----------------------------------------------------------------------------------------
%    CAPTION STYLE
%----------------------------------------------------------------------------------------
%\DeclareCaptionFont{white}{\color{white}}
%\DeclareCaptionFormat{listing}{\colorbox{lightgray}{\parbox{\dimexpr\textwidth-2\fboxsep\relax}{#1#2#3}}}
%\captionsetup[lstlisting]{format=listing,font=small,labelfont=white,textfont=white}
%\captionsetup[table]{format=listing,font=small,labelfont=white,textfont=white}
%\captionsetup[figure]{format=listing,font=small,labelfont=white,textfont=white}
%\captionsetup[grammar]{format=listing,font=small,labelfont=white,textfont=white}

%----------------------------------------------------------------------------------------
%    LISTING STYLE
%----------------------------------------------------------------------------------------
\definecolor{comment}{rgb}{0.65, 0.65, 0.65}
\definecolor{string}{rgb}{0.16, 0.463, 0.816}
\definecolor{keyword1}{rgb}{0.0, 0.0, 1.0}
\definecolor{keyword2}{rgb}{0.0, 0.0, 1.0}
\definecolor{identifier}{rgb}{0.0, 0.0, 0.545}
\definecolor{backcolour}{rgb}{0.95, 0.95, 0.95}

\lstset{
basicstyle=\scriptsize\ttfamily,
numberstyle=\tiny\ttfamily,
numbersep=8pt,
tabsize=1,
showspaces=false,
showstringspaces=false,
breaklines=true,
emptylines=1,
xleftmargin=14pt,
keywordstyle=[1]\color{keyword1},
keywordstyle=[2]\color{keyword2},
commentstyle=\color{comment},
stringstyle=\color{string},
identifierstyle=\color{identifier},
backgroundcolor=\color{backcolour},
frame=single,
framerule=0pt
}

\tcbset{colback=gray!30!white, colframe=gray!75!black, arc=1mm, leftrule=2mm, left=1mm}

%----------------------------------------------------------------------------------------
%        LISTINGS
%----------------------------------------------------------------------------------------
\lstnewenvironment{ShellListing}[2]{%
\lstset{language=BASH, label=#1, caption=#2}
}{%
}

\lstnewenvironment{Bash}{%
\lstset{language=BASH}
}{%
}

\lstnewenvironment{SQL}{%
\lstset{language=SQL}
}{%
}

%----------------------------------------------------------------------------------------
%	MACROS
%----------------------------------------------------------------------------------------

\newcommand{\csvsqldb}{\textit{csvsqldb}}
\newcommand{\sqlex}[3]{\lstinputlisting[language=SQL,numbers=left,float=ht,label=#1,caption={#2}]{../examples/#3.sql}}
\newcommand{\sqlinline}[1]{\lstinline[language=SQL]!#1!}
\newcommand{\bashinline}[1]{\lstinline[language=BASH]!#1!}

%----------------------------------------------------------------------------------------
%    TABLES
%----------------------------------------------------------------------------------------
\newenvironment{FseTabular}[3]{% #1 = caption, #2 = columns, #3 = label
    \begin{table*}[!htbp]
    \sffamily
    \small
    \centering
    \caption{#1}
    \label{#3}
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{@{}#2@{}}\toprule
}{%
    \bottomrule
    \end{tabular}
    \end{table*}
}

%----------------------------------------------------------------------------------------
%    ENVIRONMENT
%----------------------------------------------------------------------------------------
\newcommand{\ra}[1]{\renewcommand{\arraystretch}{#1}}
